
# Sovereign SRE Agent Specification (Phase 10)

## 1. Mission Statement
The SRE Agent ("The Field Medic") is responsible for the operational stability of the Sovereign SDLC. Unlike the Architect (who plans) or the Builder (who executes), the SRE Agent **protects**. Its primary directive is: *"Maintain System Health at all costs, even if it means sacrificing new features."*

## 2. Core Capabilities

### 2.1. The Watchtower (Monitoring)
The SRE Agent continually polls three sources of truth:
1.  **Structural Health:** `src/data/architecture_report.json` (Cycles, Hubs).
2.  **Social Health:** `src/data/org_debt_report.json` (Friction, Contention).
3.  **Forensic Health:** `.ai/audit/ledger.jsonl` (Integrity checks).

### 2.2. The Auto-Revert Protocol (Active Defense)
If a **Critical Anomaly** is detected, the SRE Agent is authorized to execute a "Rollback" without human intervention to restore the "Last Known Good State".

**Trigger Conditions (Defcon 1):**
- **Circular Dependency Detected:** Immediate revert of the last commit responsible for the cycle.
- **Sovereignty Violation:** Unauthorized edit to a "Logic" file by an Agent (detected via `ledger.jsonl`).
- **Build Failure:** (Future) If a commit breaks the build in `main`.

### 2.3. Incident Management
Every intervention is logged as an **Incident**.
- **Log Format:** `[INCIDENT] <Timestamp> - <Action> - <Reason>`
- **Notification:** Critical Alert in Mission Control.

## 3. Implementation Plan

### 3.1. `scripts/sre_monitor.ts`
The brain of the SRE.
- Runs on a schedule (or post-commit hook).
- Reads the reports generated by Phase 9 tools.
- Decision Logic:
  ```typescript
  if (architectureReport.circular_dependencies.length > 0) {
      const culpritCommit = identifyCulprit();
      executeRevert(culpritCommit);
  }
  ```

### 3.2. `scripts/ops/revert_change.ts`
The hand of the SRE.
- Wraps `git revert`.
- Ensures working directory is clean before action.
- Updates `ledger.jsonl` with `ACTION: REVERT`.

### 3.3. Dashboard Integration
- New "Operations" or "Live Status" tab.
- Displays "System Defcon Level" (Green/Yellow/Red).
- List of recent automated interventions.

## 4. Risks & Mitigations
- **Risk:** Revert Wars (SRE reverts code, Agent reapplies it).
- **Mitigation:** SRE adds a specific "Lock" or "Cool-down" to the file/branch after a revert.
