graph TD
    %% Roles
    User((üëÆ‚Äç‚ôÇÔ∏è Comandante\nAccountable))
    Agent[ü§ñ Agente Constructor\nResponsible]
    Gov[‚öñÔ∏è Agente de Gobernanza]
    SRE[üõ°Ô∏è SRE Monitor & ATDI]
    
    %% Artefactos
    Const[üìú Constitution.md]
    Spec[üìÑ Spec.md\n(Intenci√≥n)]
    Plan[üìù Plan.md\n(Estrategia)]
    Tasks[‚úÖ Tasks.md\n(T√°cticas)]
    Code[üíª C√≥digo Fuente]
    Dash[üëÅÔ∏è Mission Control]

    %% Flujo SDD (Spec-Driven Development)
    User -->|/specify| Spec
    Spec -->|Validar vs| Const
    Const -.->|Guardarra√≠les| Gov
    
    subgraph "Fase de Planificaci√≥n (Cerebro)"
        Spec --> Agent
        Agent -->|Genera| Plan
        Gov -->|Audita| Plan
        Plan -->|Requiere Firma| User
    end

    User -->|‚úçÔ∏è sign_off.ts| Plan
    
    subgraph "Fase de Ejecuci√≥n (M√∫sculo)"
        Plan -->|/tasks| Tasks
        Tasks --> Agent
        Agent -->|Implementa| Code
    end

    subgraph "Sistema Nervioso (Vigilancia Continua)"
        Code --> SRE
        SRE -->|Calcula ATDI & Ciclos| Code
        SRE -->|Revertir si Riesgo > Umbral| Code
        SRE -->|Heartbeat (JSON)| Dash
    end
    
    subgraph "Capa Socio-T√©cnica"
        Code -->|An√°lisis de Fricci√≥n| ConwayRadar
        ConwayRadar -->|Alertas Sociales| Dash
    end

    Dash -->|Visualizaci√≥n en Tiempo Real| User
